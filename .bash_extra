#!/bin/sh

shopt -s checkwinsize
shopt -s histappend
use_color=true
export PATH="$HOME/bin:$PATH"
export EDITOR="vi"

#. "$HOME/.sshagentrc"

set -o vi
stty stop undef
stty start undef

if which gvim > /dev/null 2>&1 && [ "$DISPLAY" = ":0" ]; then
    export server_name="VIM"

    start_vim_server() {
        gvim --serverlist | grep -q "^$server_name$" && return
        wd="$PWD"
        cd
        gvim --servername "$server_name" "$@"
        cd "$wd"
        sleep 1
    }

    vim() {
        start_vim_server

        if [[ "$@" != "" ]]; then
            gvim --servername "$server_name" --remote-silent "$@"
        fi
    }
fi

alias todo="$HOME/.todo/todo.sh"
alias ssh-insecure="ssh -o UserKnownHostsFile=/dev/null -o StrictHostKeyChecking=no"
alias scp-insecure="scp -o UserKnownHostsFile=/dev/null -o StrictHostKeyChecking=no"

alias screen="set | awk '\$0 ~ /^(DISPLAY|SSH_)/ { print \"export \" \$0 }' > $HOME/.ssh_vars; screen"
alias ssh="[ -e $HOME/.ssh_vars ] && source $HOME/.ssh_vars; ssh"

PS1="\[\033[01;32m\]\u@\h\[\033[01;34m\] \w\$(__git_ps1) \$\[\033[00m\] "
